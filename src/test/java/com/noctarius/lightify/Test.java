package com.noctarius.lightify;

import java.nio.ByteBuffer;
import java.nio.charset.Charset;

public class Test {

    private static final Charset UTF8 = Charset.forName("UTF8");

    public static void main(String[] args) {
        /*if(true) {
            System.out.println(Integer.toHexString(Byte.toUnsignedInt((byte) -35)));
            return;
        }*/

        //for (int i = 0xd4; i < 0xe0; i++) {
        int i = 0xe3;
            try {                                                 //"172.25.100.141"  192.168.10.1
                LightifyLink link = new LightifyLink("172.25.100.141");

                /*ByteBuffer buffer = ByteBuffer.allocate(125).order(ByteOrder.LITTLE_ENDIAN);
                buffer.put((byte) 1); // set wifi
                putString(buffer, "ISD", 33);
                putString(buffer, "VelkynVeldrin1404", 65);
                buffer.putInt(0);
                buffer.put((byte) 0);
                buffer.put((byte) 1);
                buffer.put(ByteBuffer.allocate(20).array());*/

                //link.perform((byte) i, new byte[] {(byte) 3});
                //link.performSearch(System.out::println);
                link.disconnect();
            } catch (Exception e) {
                System.out.println("0x" + Integer.toHexString(i) + ": " + e.getMessage());
            }
        //}
    }


    // Scan WIFI
    // 0x104361707475726500000000000000000000000000000000000000000000000000003412980731BC0401000000BCFFFFFFCAFFFFFF45617379426F782D38313733323500000000000000000000000000000000000000022308078C730501000000BCFFFFFFB4FFFFFF574C414E2D31373937363100000000000000000000000000000000000000000000E06066412DD30401000000BCFFFFFFA1FFFFFF45617379426F782D30303635383900000000000000000000000000000000000000944A0CB038EE0501000000BCFFFFFF9FFFFFFF495344000000000000000000000000000000000000000000000000000000000000C412F5AA50700506000000BCFFFFFFD6FFFFFF4953442D4761737400000000000000000000000000000000000000000000000000C412F5AA50720506000000BCFFFFFFD7FFFFFF5550433234343839373930370000000000000000000000000000000000000000001449E08F34D80406000000BCFFFFFFA8FFFFFF465249545A21426F782037333132000000000000000000000000000000000000003431C4AE7E9A0408000000BCFFFFFFC6FFFFFF465249545A21426F7820476173747A7567616E670000000000000000000000000082C7A6AFD0CB0508000000BCFFFFFFB0FFFFFF465249545A21426F782037333132000000000000000000000000000000000000009CC7A6AFD0CB0508000000BCFFFFFFAFFFFFFF465249545A21426F7820466F6E20574C414E2037323430000000000000000000000024FEA2C395050A000000BCFFFFFFBFFFFFFF70656E696E73756C610000000000000000000000000000000000000000000000001883BF3D26DA050A000000BCFFFFFFA5FFFFFF55504332373932373933000000000000000000000000000000000000000000000088F7C75241A0050B000000BCFFFFFFC3FFFFFF556E6974796D65646961205769666953706F7400000000000000000000000000008AF7C75241A2040B000000BCFFFFFFC2FFFFFF45617379426F782D33313734333100000000000000000000000000000000000000944A0C57D074050B000000BCFFFFFFB9FFFFFF5465727374656567656E73747261737365204D414D4F0000000000000000000000246511F0358C050C000000BCFFFFFFA4FFFFFF
    // byte 63 (0x10) => 16 (numOfWIFIs)
    // 32 bytes WIFI name (stringz)
    //
    // 16 WIFIs, 51 bytes each, 

    private static void putString(ByteBuffer buffer, String value, int length) {
        ByteBuffer b = ByteBuffer.allocate(length);
        b.put(value.getBytes(UTF8));
        b.position(b.limit());
        b.rewind();
        buffer.put(b);
    }

}
